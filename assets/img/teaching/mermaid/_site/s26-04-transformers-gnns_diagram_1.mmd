flowchart LR
    X["Input x<sub>i</sub><br/>(per-residue<br/>embedding)"] --> WQ["W<sup>Q</sup>"]
    X --> WK["W<sup>K</sup>"]
    X --> WV["W<sup>V</sup>"]

    WQ --> Q["Query q<sub>i</sub><br/>'What am I<br/>looking for?'"]
    WK --> K["Key k<sub>j</sub><br/>'What do I<br/>have to offer?'"]
    WV --> V["Value v<sub>j</sub><br/>'What info<br/>do I carry?'"]

    Q & K --> S["Score: q<sub>i</sub> · k<sub>j</sub><br/>(dot product)"]
    S --> SM["Softmax<br/>α<sub>ij</sub>"]
    SM --> AG["Weighted Sum<br/>Σ α<sub>ij</sub> · v<sub>j</sub>"]
    V --> AG
    AG --> O["Output<br/>(context-aware)"]

    style Q fill:#fff3e0,stroke:#FF9800
    style K fill:#e8f4fd,stroke:#2196F3
    style V fill:#e8f5e9,stroke:#4CAF50
